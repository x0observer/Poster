# Poster
# Приложение для постов

Это приложение позволяет пользователям создавать и публиковать посты в контейнере Docker.

## Требования

Прежде чем начать работу с приложением, убедитесь, что на вашем компьютере или сервере установлены следующие компоненты:

- [Docker](https://docs.docker.com/get-docker/)
- [Docker Compose](https://docs.docker.com/compose/install/)

## Запуск Приложения

Следуйте этим шагам, чтобы настроить и запустить приложение:

1. **Склонируйте репозиторий:**

   ```bash
   git clone https://github.com/ваше-имя-пользователя/ваш-репозиторий.git
   cd ваш-репозиторий

2. **Создайте файл окружения***:

Создайте файл или используйте готовое окружение .env в корневой директории проекта.

3. **Соберите и запустите Docker-контейнеры**:
   ```bash
   docker-compose build
   docker-compose up -d
Это создаст Docker-образы и запустит контейнеры в фоновом режиме.

Приложение доступно по адресу: http://localhost:9999

- Вход осуществляется через "Authorization", по запросу /login/ получим ключ входа для последующего взаимодействие с системой
<img width="907" alt="image" src="https://github.com/x0observer/Poster/assets/106298051/d84abd7a-d372-4e73-bfee-c398436e5cbb">

## Пакеты и структура файлов
Подход организации проекта на основе "Pattern Repository" способствует гибкости и читаемости кода. Это достигается через повторное использование проверенных паттернов проектирования, структурирование кода по частям с применением архитектурных паттернов, модульное разбиение приложения для упрощения изменений, обеспечение гибкости для будущих расширений, четкое разделение ответственностей между компонентами и повышение понимания кода за счет применения знакомых паттернов проектирования. Это уменьшает дублирование кода и облегчает его поддержку.

- __init__.py: Может быть пустым, если нет необходимости в специфических инициализациях.

- main.py: Служит точкой входа в приложение, где размещается код для запуска FastAPI приложения.

- routers: Этот пакет содержит модули, каждый из которых отвечает за определенные маршруты или ресурсы.

- middleware: Содержит пользовательские middleware, конфигурации внешних ресурсов. Например: базы данных, брокер сообщений и т.д.

- db: Хранит модели данных приложения, включая классы, описывающие сущности и их поля. Пакет, включающий файлы для управления базой данных. Может содержать файлы для подключения к базе данных, создания таблиц и миграций.

- services: Содержит логику приложения, не связанную с обработкой HTTP запросов. Может включать файлы, описывающие бизнес-логику и сервисы приложения. Эта структура файлов и пакетов поможет разделить ответственности и упростить навигацию и поддержку проекта.

<img width="907" alt="image" src="https://github.com/x0observer/Poster/assets/106298051/71d28633-9ba2-4c7f-816f-d7cd89a3c946">

## Структура сервисов
Использование FastAPI:

Проект использует FastAPI для обработки HTTP-запросов и создания API.
- Маршутизатор: Используются различные методы HTTP-запросов (POST, GET, PUT, PATCH, DELETE), каждый из которых имеет свой URL путь.
Обработчики маршрутов (create_post, get_post, get_posts, update_post, patch_post, delete_post) выполняют различные операции в зависимости от HTTP-метода.

- Зависимости: Используются зависимости для инъекции зависимых объектов, таких как PostRepository и UserPemissions.
Также применяется зависимость для работы с API ключом.

- Обработка запросов: Каждая функция обработчика маршрута принимает параметры запроса, такие как post_id, post, updated_post и др., и обрабатывает запрос соответственно.
Ответы возвращаются в виде моделей данных, определенных в схемах (Post, PostFull).

- Обработка ошибок: Обработчики проверяют наличие данных или их успешность, выбрасывая ошибки HTTPException с соответствующими статусами и сообщениями.

<img width="907" alt="image" src="https://github.com/x0observer/Poster/assets/106298051/69ecb239-af16-4935-ad4c-3827c94e98be">

## Инфраструктура 

- Эффективная обработка множества соединений: Unicorn основывается на асинхронности Python, что позволяет ему эффективно обрабатывать множество одновременных соединений, не блокируя процессор и ожидая завершения операций ввода/вывода.

- Асинхронные запросы и асинхронный код: В Unicorn асинхронные запросы обрабатываются в асинхронном коде, что делает возможным отклик на другие запросы и события во время ожидания завершения операций ввода/вывода.

- ORM (Object-Relational Mapping) в FastAPI:

- Поддержка различных ORM систем: FastAPI позволяет вам выбирать из различных ORM систем в зависимости от ваших потребностей, включая SQLAlchemy ORM, Tortoise-ORM, GINO и другие. Это обеспечивает гибкость в выборе инструмента для работы с базой данных.

- Абстракция базы данных через объекты и классы Python: ORM позволяет вам работать с базой данных, представляя данные и операции над ними в виде объектов и классов Python. Это делает работу с базой данных более интуитивной и удобной, а также уменьшает необходимость написания SQL запросов вручную.

Обе эти концепции - асинхронная обработка в Unicorn и использование ORM в FastAPI - являются ключевыми компонентами для создания эффективных, масштабируемых и удобных для разработки веб-приложений.

![image](https://github.com/x0observer/Poster/assets/106298051/083242e2-ac7a-405c-b8d3-44a5e62946e2)
